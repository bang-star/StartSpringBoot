# 07.Rest 방식의 댓글 처리와 JPA 처리

  - 댓글 처리 자체의 내용이 중요한 것은 아니고, JavaScript를 이용해서 Ajax를 호출을 하는 경우에 어떤 방식으로 처리할 것인지가 주된 내용이다.

  - 댓글과 관련된 기능을 추가하게 되면 생기는 변화

     - 게시물의 리스트 화면에서 댓글의 개수를 파악할 수 있다.

     - 게시물의 조회 화면에서 댓글 목록을 출력할 수 있다.

     - 댓글과 관련된 모든 기능이 특정한 게시물의 조회화면에서 이루어질 수 있다.

  - 댓글과 관련된 기능 개발은 컨트롤러의 경우 @RestController를 적용하여 데이터와 GET/POST/PUT/DELETE와 같은 전송 방식을 이용한다.

<br />

## 7.1 프로젝트의 구성과 @RestController

  - 댓글 처리는 하나의 화면에서 이루어진다.
    
    즉, 조회 화면이라는 한 페이지 안에서 댓글의 목록이 보이고, 새로운 댓글이 추가, 수정, 삭제 된다.

    댓글 개발 작업은 화면의 이동이 없는 상태에서 데이터를 주고 받는 Ajax, WebSocet, Socket.io 등의 방식을 이용하는 것이 좋다.

<br />

## 7.1.1 REST 방식과 @RestController

  - HTTP 프로토콜에서 데이터를 전송하는 방식

     - GET 방식 데이터를 보여주거나 다른 사람에게 알리는 방식

        기본적으로는 정보의 확산을 목적으로 설계된다. 인터넷상의 URL은 하나의 고유한 데이터를 찾는 이름이나 태그가 된다.

     - POST 방식 데이터를 이용해서 특별한 작업을 처리하는 방식

        정보의 가공이 목적이다. 정확한 목적을 가지고 특정한 작업을 수행하기 위해 사용한다.

  - REST 방식

     - GET/POST 방식을 이용하던 시대를 지나오면서 작업을 할 때 좀 더 범용적인 규칙을 갖고자 하는 움직임이다.

     - 인터넷에서 URL이란 '하나의 온전한 자원의 상징'이다. 하나의 URL은 지구상에 유일한, 특정한 콘텐츠의 고유한 값이어야 한다는 것이다.

     - 과거에 특정한 상품을 조회할 때 '/product.do?pno=12345'와 같은 방식을 이용해서 '기능' 자체가 URL이 되고, 파라미터 등을 이용해서 데이터를 제공하는 형태를 사용했다.

     - REST 방식을 이용해 URL이라는 것이 하나의 온전한 콘텐츠 자체를 의미하기 때문에 '/product/12345'를 웹상에서 유일한 콘텐츠의 아이디처럼 사용하는 것을 권장한다.

     - REST 방식에서 URL이 콘텐츠 자체를 의미하기 때문에 콘텐츠에 대한 어떤 작업을 할 것인가는 전송 방식을 이용해서 처리한다.

  - REST 전송방식

     - GET - 특정 리소스를 조회(read)하는 용도로 사용

        예: /products/123

     - POST - 특정 리소스를 생성(create)하는 용도로 사용

        예: /products/ or /member/123

     - PUT - 특정 리소스를 수정

     - DELETE - 특정 리소스를 삭제

  - REST 방식으로 설계하는 경우에는 '명사'가 URL의 구분이 되고, 전송 방식이 동사의 역할을 하게 된다.

  - Spring MVC에서 REST 방식의 설계와 사용을 위해서 제공하는 어노테이션

     - @RequestBody 

        클라이언트가 보내는 JSON 데이터의 수집 및 가공 

     - @ResponseBody

        클라이언트에게 전송되는 데이터에 맞게 MIME 타입을 결정

     - @PathVariable

        URL의 경로에 포함된 정보 추출

     - @RestController

        컨트롤러의 모든 메소드 리턴 타입으로 @ResponseBody를 기본으로 지정

  - 과거에는 REST 방식으로 데이터를 처리하려면 여러 개의 라이브러리와 복잡한 설정이 필요했지만, 최근에는 Web 관련 처리에 모두 포함되어서 필요한 경우에만 개발 내용을 추가하면 된다.